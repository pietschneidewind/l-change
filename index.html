<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L’échange.</title>

<style>
@font-face{
  font-family: "Computer Says No";
  src: url("computer-says-no.otf") format("opentype");
}

*{margin:0;padding:0;box-sizing:border-box;}

:root{
  --bg:#4b2f3a;
  --text:#c8e26a;
  --curtain:#000;
  --curtain-duration:3.5s;
  --ease:cubic-bezier(.8,0,.2,1);

  /* Abstand Title -> Form (Desktop default) */
  --title-form-gap: 20px;
}

body{
  background:var(--bg);
  color:var(--text);
  font-family:"Computer Says No", monospace;
  height:100vh;
  overflow:hidden;
}

/* ================= TITLE ================= */
.title{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:clamp(64px,10vw,160px);
  letter-spacing:0.05em;
  text-align:center;
  transition:transform 1.6s var(--ease), opacity 1.2s ease;
}

/* Desktop drift */
.title-up{
  transform:translate(-50%,-135%);
}

/* ================= FORM ================= */
.form-wrapper{
  position:absolute;
  left:50%;
  /* Form sitzt bewusst etwas unter der Mitte */
  top:56%;
  transform:translate(-50%,0);
  width:min(560px, calc(100vw - 48px));
  opacity:0;
  transition:opacity 1s ease;
}

.form-wrapper.show{ opacity:1; }

form{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top: var(--title-form-gap);
}

input, textarea{
  width:100%;
  background:transparent;
  border:1px solid var(--text);
  color:var(--text);
  padding:14px;
  font-family:"Computer Says No", monospace;
  font-size:18px; /* iOS zoom vermeiden */
}

textarea{ resize:none; }

button{
  width:100%;
  background:var(--text);
  color:var(--bg);
  border:none;
  padding:14px;
  cursor:pointer;
  font-family:"Computer Says No", monospace;
  font-size:18px;
}

/* ================= FINAL ================= */
.final{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  text-align:center;
  opacity:0;
  transition:opacity 1.2s ease;
}

.final.show{ opacity:1; }

.final p{
  font-size:clamp(32px,6vw,80px);
  letter-spacing:0.04em;
}

/* ================= CURTAIN ================= */
.curtain{
  position:fixed;
  inset:0;
  display:flex;
  z-index:10;
  pointer-events:none;
}

.panel{
  width:50%;
  height:100%;
  background:var(--curtain);
  transition:transform var(--curtain-duration) var(--ease);
}

.left{transform-origin:left;}
.right{transform-origin:right;}

.open .left{ transform:perspective(1400px) rotateY(-110deg); }
.open .right{ transform:perspective(1400px) rotateY(110deg); }

/* ================= MOBILE TUNING ================= */
/* Auf iPhone: mehr Abstand + Form weiter runter + weniger aggressiver Drift */
@media (max-width: 480px){
  :root{
    --title-form-gap: 16px; /* kleiner, aber definiert */
  }

  .title-up{
    transform:translate(-50%,-120%); /* weniger hoch -> bleibt sauber über dem Form */
  }

  .form-wrapper{
    top:60%; /* Form weiter nach unten */
    width:calc(100vw - 40px);
  }
}
</style>
</head>

<body>

<h1 class="title" id="title">L’échange.</h1>

<div class="form-wrapper" id="formWrapper">
  <form id="contactForm" action="https://formspree.io/f/maqdpkgb" method="POST">
    <input type="text" name="name" placeholder="Name" required>
    <input type="tel" name="phone" placeholder="Phone" required>
    <input type="email" name="email" placeholder="Mail" required>
    <textarea name="drive" rows="4" placeholder="What drives you in life?" required></textarea>
    <button type="submit">Send</button>
  </form>
</div>

<div class="final" id="final">
  <p>See you at the table.</p>
</div>

<div class="curtain" id="curtain" aria-hidden="true">
  <div class="panel left"></div>
  <div class="panel right"></div>
</div>

<script>
const curtain = document.getElementById("curtain");
const title = document.getElementById("title");
const formWrapper = document.getElementById("formWrapper");
const form = document.getElementById("contactForm");
const finalScreen = document.getElementById("final");

const CURTAIN_DELAY = 200;
const CURTAIN_DURATION = 3500;

window.addEventListener("load", () => {
  setTimeout(() => curtain.classList.add("open"), CURTAIN_DELAY);

  setTimeout(() => {
    curtain.remove();

    setTimeout(() => {
      title.classList.add("title-up");

      setTimeout(() => {
        formWrapper.classList.add("show");
      }, 900);

    }, 600);

  }, CURTAIN_DELAY + CURTAIN_DURATION);
});

form.addEventListener("submit", async (event) => {
  event.preventDefault();

  const data = new FormData(form);
  const response = await fetch(form.action, {
    method: "POST",
    body: data,
    headers: { "Accept": "application/json" }
  });

  if (response.ok) {
    form.reset();
    title.style.opacity = "0";
    formWrapper.style.opacity = "0";

    setTimeout(() => {
      finalScreen.classList.add("show");
    }, 1200);
  }
});
</script>

</body>
</html>
