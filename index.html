<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>l’échange.</title>

<style>
@font-face{
  font-family: "computer says no";
  src: url("computer-says-no.otf") format("opentype");
}

*{margin:0;padding:0;box-sizing:border-box;}

:root{
  --text:#c8e26a;
  --curtain:#000;
  --ease:cubic-bezier(.8,0,.2,1);
}

html, body { height:100%; }
body{
  font-family:"computer says no", monospace;
  color:var(--text);
  overflow:hidden;
  background:#000;
}

.background{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
  background:
    linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)),
    url("img-6126.jpg") center / cover no-repeat;
}

.stage{
  position:relative;
  z-index:2;
  height:100%;
  display:grid;
  place-items:center;
  padding:24px;
}

.wrapper{
  width:min(560px, calc(100vw - 48px));
  text-align:center;
  transition:opacity 1.2s ease;
}

h1{
  font-size:clamp(64px, 10vw, 160px);
  letter-spacing:0.05em;
  margin-bottom:20px;
  transition:transform 1.6s var(--ease);
}

.title-up{
  transform: translatey(-40px);
}

form{
  width:100%;
  display:flex;
  flex-direction:column;
  gap:12px;

  opacity:0;
  transform:translatey(10px);
  pointer-events:none;
  transition:opacity 1s ease, transform 1s ease;
}
form.show{
  opacity:1;
  transform:translatey(0);
  pointer-events:auto;
}

input, textarea{
  width:100%;
  background:rgba(0,0,0,0.5);
  border:1px solid var(--text);
  color:var(--text);
  padding:14px;
  font-family:"computer says no", monospace;
  font-size:18px;
  line-height:1.2;
}
textarea{ resize:none; }

button{
  width:100%;
  background:var(--text);
  color:#000;
  border:none;
  padding:14px;
  font-family:"computer says no", monospace;
  font-size:18px;
  cursor:pointer;
}

.final{
  position:fixed;
  inset:0;
  z-index:3;
  display:grid;
  place-items:center;
  text-align:center;
  padding:24px;
  opacity:0;
  pointer-events:none;
  transition:opacity 1.2s ease;
}
.final.show{
  opacity:1;
  pointer-events:auto;
}
.final p{
  font-size:clamp(32px,6vw,80px);
  letter-spacing:0.04em;
}

.curtain{
  position:fixed;
  inset:0;
  z-index:10;
  display:flex;
  pointer-events:none;
}
.panel{
  width:50%;
  height:100%;
  background:var(--curtain);
  transition:transform 3.5s var(--ease);
}
.left{transform-origin:left;}
.right{transform-origin:right;}
.open .left{transform:perspective(1400px) rotatey(-110deg);}
.open .right{transform:perspective(1400px) rotatey(110deg);}
</style>
</head>

<body>

<div class="background" aria-hidden="true"></div>

<div class="stage">
  <div class="wrapper" id="wrapper">
    <h1 id="title">l’échange.</h1>

    <form id="contactform" action="https://formspree.io/f/maqdpkgb" method="post">
      <input type="text" name="name" placeholder="name" required>
      <input type="tel" name="phone" placeholder="phone">
      <input type="email" name="email" placeholder="mail" required>
      <input type="text" name="city" placeholder="city" required>
      <input type="text" name="instagram_or_linkedin" placeholder="instagram / linkedin" >
      <textarea name="drive" rows="4" placeholder="what drives you in life?" required></textarea>
      <button type="submit" id="submitbtn">send</button>
    </form>
  </div>
</div>

<div class="final" id="final">
  <p>see you at the table.</p>
</div>

<div class="curtain" id="curtain" aria-hidden="true">
  <div class="panel left"></div>
  <div class="panel right"></div>
</div>

<script>
const curtain = document.getElementById("curtain");
const title = document.getElementById("title");
const form = document.getElementById("contactform");
const wrapper = document.getElementById("wrapper");
const finalscreen = document.getElementById("final");
const submitbtn = document.getElementById("submitbtn");

window.addEventListener("load", () => {
  setTimeout(() => curtain.classList.add("open"), 200);

  setTimeout(() => {
    curtain.remove();

    setTimeout(() => {
      title.classList.add("title-up");

      setTimeout(() => {
        form.classList.add("show");
      }, 800);

    }, 600);

  }, 3700);
});

form.addEventListener("submit", async (event) => {
  event.preventDefault();
  submitbtn.disabled = true;

  try{
    const data = new FormData(form);
    const response = await fetch(form.action, {
      method: "post",
      body: data,
      headers: { "accept": "application/json" }
    });

    if(response.ok){
      form.reset();
      wrapper.style.opacity = "0";
      setTimeout(() => finalscreen.classList.add("show"), 1200);
    } else {
      submitbtn.disabled = false;
    }
  } catch(e){
    submitbtn.disabled = false;
  }
});
</script>

</body>
</html>
