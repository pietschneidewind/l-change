<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L’échange.</title>

<style>
@font-face {
  font-family: "Computer Says No";
  src: url("computer-says-no.otf") format("opentype");
}

* { margin: 0; padding: 0; box-sizing: border-box; }

:root{
  --text:#c8e26a;
  --curtain:#000;
  --curtain-duration:3.5s;
  --ease:cubic-bezier(.8,0,.2,1);
}

body{
  font-family:"Computer Says No", monospace;
  height:100vh;
  overflow:hidden;
  color:var(--text);
}

/* ================= BACKGROUND ================= */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:
    linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)),
    url("img-6126.jpg") center center / cover no-repeat;
  z-index:-2;
}

/* ================= WRAPPER ================= */
.wrapper{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
  width:min(560px, calc(100vw - 48px));
  transition:transform 1.6s var(--ease), opacity 1.2s ease;
}

/* ================= TITLE ================= */
h1{
  font-size:clamp(64px, 10vw, 160px);
  letter-spacing:0.05em;
  margin-bottom:20px;
  transition:transform 1.6s var(--ease);
}

.title-up{
  transform:translateY(-40px);
}

/* ================= FORM ================= */
form{
  display:flex;
  flex-direction:column;
  gap:12px;
  width:100%;
  opacity:0;
  transform:translateY(10px);
  pointer-events:none;
  transition:opacity 1s ease, transform 1s ease;
}

form.show{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}

input, textarea{
  width:100%;
  background:rgba(0,0,0,0.5);
  border:1px solid var(--text);
  color:var(--text);
  padding:14px;
  font-family:"Computer Says No", monospace;
  font-size:18px;
}

textarea{ resize:none; }

button{
  width:100%;
  background:var(--text);
  color:black;
  border:none;
  padding:14px;
  font-family:"Computer Says No", monospace;
  font-size:18px;
  cursor:pointer;
}

/* ================= FINAL ================= */
.final{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  opacity:0;
  transition:opacity 1.2s ease;
}

.final.show{ opacity:1; }

.final p{
  font-size:clamp(32px,6vw,80px);
}

/* ================= CURTAIN ================= */
.curtain{
  position:fixed;
  inset:0;
  display:flex;
  z-index:10;
  pointer-events:none;
}

.panel{
  width:50%;
  height:100%;
  background:var(--curtain);
  transition:transform var(--curtain-duration) var(--ease);
}

.left{transform-origin:left;}
.right{transform-origin:right;}

.open .left{transform:perspective(1400px) rotateY(-110deg);}
.open .right{transform:perspective(1400px) rotateY(110deg);}

</style>
</head>

<body>

<div class="wrapper" id="wrapper">
  <h1 id="title">L’échange.</h1>

  <form id="contactForm" action="https://formspree.io/f/maqdpkgb" method="POST">
    <input type="text" name="name" placeholder="Name" required>
    <input type="tel" name="phone" placeholder="Phone" required>
    <input type="email" name="email" placeholder="Mail" required>
    <textarea name="drive" rows="4" placeholder="What drives you in life?" required></textarea>
    <button type="submit">Send</button>
  </form>
</div>

<div class="final" id="final">
  <p>See you at the table.</p>
</div>

<div class="curtain" id="curtain">
  <div class="panel left"></div>
  <div class="panel right"></div>
</div>

<script>

const curtain = document.getElementById("curtain");
const title = document.getElementById("title");
const form = document.getElementById("contactForm");
const wrapper = document.getElementById("wrapper");
const finalScreen = document.getElementById("final");

window.addEventListener("load", () => {

  setTimeout(() => curtain.classList.add("open"), 200);

  setTimeout(() => {
    curtain.remove();

    setTimeout(() => {
      title.classList.add("title-up");

      setTimeout(() => {
        form.classList.add("show");
      }, 800);

    }, 600);

  }, 3700);

});

form.addEventListener("submit", async (event) => {
  event.preventDefault();

  const data = new FormData(form);
  const response = await fetch(form.action, {
    method:"POST",
    body:data,
    headers:{ "Accept":"application/json" }
  });

  if(response.ok){
    form.reset();
    wrapper.style.opacity = "0";

    setTimeout(()=>{
      finalScreen.classList.add("show");
    },1200);
  }
});

</script>

</body>
</html>
